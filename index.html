<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Domanda del Giorno</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f7f7f7;
      margin: 0;
      padding: 20px;
      display: flex;
      justify-content: center;
    }
    .container {
      background: white;
      padding: 20px;
      border-radius: 12px;
      max-width: 650px;
      width: 100%;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }
    h1 { text-align: center; }
    input[type="text"], input[type="date"] {
      width: 100%;
      padding: 10px;
      margin-top: 10px;
      border: 1px solid #ccc;
      border-radius: 6px;
    }
    button {
      margin-top: 10px;
      padding: 10px 20px;
      background: #0077ff;
      color: white;
      border: none;
      border-radius: 6px;
      cursor: pointer;
    }
    .message { margin-top: 20px; font-weight: bold; }
    .correct { color: green; }
    .wrong { color: red; }
  </style>
</head>
<body>
  <div class="container">
    <h1>Domanda del Giorno</h1>

    <label>Seleziona data:</label>
    <input type="date" id="datePicker" />

    <h2 id="question"></h2>

    <input type="text" id="answerInput" placeholder="Scrivi la tua risposta" />
    <button onclick="checkAnswer()">Invia</button>

    <p id="resultMessage" class="message"></p>
  </div>

  <script>
    // --- DATABASE SEMPLICE INSERITO NEL CODICE ---
    // Suggerito: gestire domande/risposte/frasi con un file JSON esterno facile da modificare
    const qaData = {
      "2026-01-01": {
        question: "Qual è il primo giorno dell'anno?",
        answer: "1 gennaio",
        phrase: "Ottimo inizio!"
      },
      "2026-01-02": {
        question: "Quanto fa 2+2?",
        answer: "4",
        phrase: "Risposta perfetta!"
      },
      "2026-01-03": {
        question: "Colore del cielo in una giornata limpida?",
        answer: "blu",
        phrase: "Ben fatto!"
      }
      // ...qui puoi aggiungere tutte le date del 2026
    };

    // Quando si apre la pagina, mostra la domanda di oggi
    window.onload = function () {
      const today = new Date().toISOString().split("T")[0];
      document.getElementById("datePicker").value = today;
      loadQuestion(today);
    };

    // Cambiare data con il selettore
    document.getElementById("datePicker").addEventListener("change", function () {
      loadQuestion(this.value);
    });

    function loadQuestion(date) {
      const qElement = document.getElementById("question");
      const msg = document.getElementById("resultMessage");
      msg.textContent = "";
      msg.className = "message";
      document.getElementById("answerInput").value = "";

      if (qaData[date]) {
        qElement.textContent = qaData[date].question;

        // Controlla se l'utente ha già risposto
        const saved = localStorage.getItem("result-" + date);
        if (saved) {
          if (saved === "correct") {
            msg.textContent = qaData[date].phrase;
            msg.classList.add("correct");
          } else {
            msg.textContent = "Hai già risposto ma era sbagliato.";
            msg.classList.add("wrong");
          }
        }
      } else {
        qElement.textContent = "Nessuna domanda per questa data.";
      }
    }

    function checkAnswer() {
      const date = document.getElementById("datePicker").value;
      const userAns = document.getElementById("answerInput").value.trim().toLowerCase();
      const msg = document.getElementById("resultMessage");

      if (!qaData[date]) {
        msg.textContent = "Nessuna domanda disponibile.";
        msg.className = "message wrong";
        return;
      }

      const correct = qaData[date].answer.toLowerCase();

      if (userAns === correct) {
        msg.textContent = qaData[date].phrase;
        msg.className = "message correct";
        localStorage.setItem("result-" + date, "correct");
      } else {
        msg.textContent = "Risposta sbagliata.";
        msg.className = "message wrong";
        localStorage.setItem("result-" + date, "wrong");
      }
    }
  </script>
</body>
</html>
